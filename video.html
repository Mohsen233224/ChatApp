<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TikTok Clone Comments</title>
<style>
body{
  margin:0;
  background:black;
  overflow:hidden;
  font-family:'Arial','Segoe UI Emoji',sans-serif;
}
video{
  width:100%;
  height:100vh;
  object-fit:cover;
}
.back{
  position:absolute;
  top:20px;
  right:20px;
  color:white;
  font-size:20px;
  cursor:pointer;
  z-index:10;
}
.side{
  position:absolute;
  right:10px;
  bottom:100px;
  color:white;
  text-align:center;
  z-index:10;
}
.icon{
  font-size:40px;
  margin:15px 0;
  cursor:pointer;
  user-select:none;
  transition: transform 0.2s;
}
.icon:active{
  transform: scale(1.2);
}

/* Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª */
#commentBox{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  height:0%;
  background:#111;
  display:flex;
  flex-direction:column;
  color:white;
  z-index:20;
  overflow:hidden;
  transition: height 0.3s;
}
#commentHeader{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px;
  border-bottom:1px solid #333;
  font-size:18px;
}
#commentsList{
  flex:1;
  overflow-y:auto;
  padding:10px;
}
.commentItem{
  border-bottom:1px solid #333;
  padding:5px 0;
}
#commentInputBox{
  display:flex;
  padding:10px;
  border-top:1px solid #333;
}
#commentInputBox textarea{
  flex:1;
  height:40px;
  background:#222;
  border:none;
  color:white;
  resize:none;
  padding:10px;
  font-size:16px;
  border-radius:5px;
}
#commentInputBox button{
  margin-left:10px;
  padding:0 15px;
  font-size:16px;
  background:#ff2c55;
  color:white;
  border:none;
  cursor:pointer;
  border-radius:5px;
}
</style>
</head>
<body>

<div class="back" onclick="back()">Ø±Ø¬ÙˆØ¹</div>

<video autoplay loop controls id="videoPlayer">
<source src="">
</video>

<div class="side">
  <div class="icon" id="likeBtn" onclick="toggleLike()">ğŸ¤</div>
  <div id="likeCount">0</div>

  <div class="icon" onclick="openComments()">ğŸ’¬</div>

  <div class="icon" onclick="shareVideo()">â†—</div>
</div>

<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª -->
<div id="commentBox">
  <div id="commentHeader">
    <span>Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª</span>
    <span style="cursor:pointer" onclick="closeComments()">âœ–</span>
  </div>
  <div id="commentsList"></div>
  <div id="commentInputBox">
    <textarea id="commentInput" placeholder="Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ..."></textarea>
    <button onclick="addComment()">Ù†Ø´Ø±</button>
  </div>
</div>

<script>
// ÙÙŠØ¯ÙŠÙˆ Ø§ÙØªØ±Ø§Ø¶ÙŠ
let video = localStorage.getItem("video") || "video1.mp4";
document.querySelector("#videoPlayer source").src = video;
document.getElementById("videoPlayer").load();

// Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨
let likes = parseInt(localStorage.getItem(video+"likes") || "0");
let liked = localStorage.getItem(video+"liked") === "true";
const likeBtn = document.getElementById("likeBtn");
const likeCount = document.getElementById("likeCount");
likeCount.innerText = likes;
likeBtn.innerText = liked ? "â¤ï¸" : "ğŸ¤";

function toggleLike(){
  if(!liked){
    likes++;
    liked = true;
    likeBtn.innerText = "â¤ï¸";
  } else {
    likes--;
    liked = false;
    likeBtn.innerText = "ğŸ¤";
  }
  localStorage.setItem(video+"likes", likes);
  localStorage.setItem(video+"liked", liked);
  likeCount.innerText = likes;
}

// Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹
function back(){
  window.history.back();
}

// Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª
const commentBox = document.getElementById("commentBox");
const commentInput = document.getElementById("commentInput");
const commentsList = document.getElementById("commentsList");

let comments = JSON.parse(localStorage.getItem(video+"comments") || "[]");

function openComments(){
  commentBox.style.height = "60%"; // ØªØ¸Ù‡Ø± ÙƒØ§Ù„ØªÙŠÙƒ ØªÙˆÙƒ
  renderComments();
}

function closeComments(){
  commentBox.style.height = "0%";
}

function addComment(){
  let text = commentInput.value.trim();
  if(text==="") return;
  comments.push(text);
  localStorage.setItem(video+"comments", JSON.stringify(comments));
  commentInput.value="";
  renderComments();
}

function renderComments(){
  commentsList.innerHTML="";
  comments.forEach(c=>{
    const div = document.createElement("div");
    div.className="commentItem";
    div.innerText=c;
    commentsList.appendChild(div);
  });
}

// Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
function shareVideo(){
  if(navigator.share){
    navigator.share({
      title: 'Ø´Ø§Ù‡Ø¯ Ù‡Ø°Ø§ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ',
      text: 'Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ Ø±Ø§Ø¦Ø¹',
      url: video
    }).then(()=>console.log("ØªÙ…Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©"))
    .catch(err=>console.log(err));
  } else {
    alert("Ù…ÙŠØ²Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…Ø© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­");
  }
}
</script>

</body>
</html>
